import*as THREE from"../build/three.module.js";import{OrbitControls}from"./lib/OrbitControls.js";import{GLTFLoader}from"./lib/GLTFLoader.js";let camera,scene,renderer;function init(){const canvas=document.getElementById("canvas");scene=new THREE.Scene,scene.background=new THREE.Color(10526880),scene.fog=new THREE.Fog(10526880,10,500),camera=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,500),camera.position.set(0,8,10),scene.add(camera);const hemiLight=new THREE.HemisphereLight(16777215,526368);scene.add(hemiLight);const dirLight=new THREE.DirectionalLight(16777215,.5);var body,body_0,body_1,body_2,body_3,body_4,body_5,body_6,body_7,body_8,wheel_0,wheel_1;dirLight.position.set(10,20,5),dirLight.castShadow=!0,dirLight.shadow.camera.top=100,dirLight.shadow.camera.bottom=-50,dirLight.shadow.camera.left=-50,dirLight.shadow.camera.right=50,dirLight.shadow.camera.near=.1,dirLight.shadow.camera.far=200,dirLight.shadow.mapSize.set(1024,1024),scene.add(dirLight);const manager=new THREE.LoadingManager;manager.onProgress=function(){},manager.onLoad=function(){document.getElementById("loader").style.display="none"};const loader=new GLTFLoader(manager).setPath("assets/");loader.load("tesla_model_3.gltf",(function(gltf){body=gltf.scene.children.find(child=>"body"===child.name),console.log(body),body_0=gltf.scene.children.find(child=>"body_0"===child.name),body_1=gltf.scene.children.find(child=>"body_1"===child.name),body_2=gltf.scene.children.find(child=>"body_2"===child.name),body_3=gltf.scene.children.find(child=>"body_3"===child.name),body_4=gltf.scene.children.find(child=>"body_4"===child.name),body_5=gltf.scene.children.find(child=>"body_5"===child.name),body_6=gltf.scene.children.find(child=>"body_6"===child.name),body_7=gltf.scene.children.find(child=>"body_7"===child.name),body_8=gltf.scene.children.find(child=>"body_8"===child.name),wheel_0=gltf.scene.children.find(child=>"wheel_0"===child.name),wheel_1=gltf.scene.children.find(child=>"wheel_1"===child.name);var rim_array=new Array(wheel_0,wheel_1),colorarray=new Array(body_0,body_1,body_2,body_3,body_4,body_5,body_6,body_7,body_8),button1,button2,button3,button4,button5;function onButtonClick(event1){for(var i=0;i<colorarray.length;i++)colorarray[i].material.color.setHex(16777215),render()}function onButtonClick2(event2){for(var i=0;i<colorarray.length;i++)colorarray[i].material.color.setHex(2565927),render()}function onButtonClick3(event3){for(var i=0;i<colorarray.length;i++)colorarray[i].material.color.setHex(13369344),render()}function onButtonClick4(event4){for(var i=0;i<rim_array.length;i++)rim_array[i].material.color.setHex(16777215),render()}function onButtonClick5(event5){for(var i=0;i<rim_array.length;i++)rim_array[i].material.color.setHex(2565927),render()}document.getElementById("button1").addEventListener("click",onButtonClick,!1),document.getElementById("button2").addEventListener("click",onButtonClick2,!1),document.getElementById("button3").addEventListener("click",onButtonClick3,!1),document.getElementById("button4").addEventListener("click",onButtonClick4,!1),document.getElementById("button5").addEventListener("click",onButtonClick5,!1);for(var i=0;i<colorarray.length;i++)colorarray[i].material.color.setHex(16777215),render();gltf.scene.position.set(0,3,0),gltf.scene.scale.set(10,10,10),gltf.scene.traverse((function(child){child.castShadow=!0})),scene.add(gltf.scene),render()}));const ground=new THREE.Mesh(new THREE.PlaneGeometry(1e3,1e3),new THREE.MeshPhongMaterial({color:10066329,depthWrite:!1}));ground.rotation.x=-Math.PI/2,ground.position.y=3,ground.receiveShadow=!0,scene.add(ground),renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),renderer.outputEncoding=THREE.sRGBEncoding,renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap,canvas.appendChild(renderer.domElement);const controls=new OrbitControls(camera,renderer.domElement);controls.addEventListener("change",render),controls.minDistance=50,controls.maxDistance=70,controls.enablePan=!1,controls.target.set(0,5,0),controls.maxPolarAngle=Math.PI/2.125,controls.update(),window.addEventListener("resize",onWindowResize),render()}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight),render()}function render(){renderer.render(scene,camera)}function onTransitionEnd(event){const element=event.target;element.remove()}init();